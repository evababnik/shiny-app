library(readr)
library(tidyverse)
branded_food <- read_csv("FoodData_Central_csv_2022-10-28/branded_food.csv")
branded_food$not_a_significant_source_of <-NULL
branded_food$household_serving_fulltext <-NULL
branded_food$package_weight <-NULL
branded_food$data_source <- NULL
branded_food$modified_date<-NULL
branded_food$available_date <-NULL
branded_food$subbrand_name <-NULL
branded_food$brand_name <-NULL
branded_food$discontinued_date <-NULL
branded_food$preparation_state_code <-NULL
branded_food$trade_channel <- NULL
branded_food$short_description <- NULL
unique(branded_food$market_country)
table(branded_food$market_country)
branded_food$market_country <-NULL
library(httr)
url <- "https://api.nal.usda.gov/fdc/v1/foods/search"
params <- list(api_key = "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8", format = "json")
# Send the API request and get the response
response <- GET(url, query = params)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
library(jsonlite)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
View(params)
# Set the API URL
url <- "https://api.nal.usda.gov/fdc/v1/foods/search"
# Set the API parameters for requesting available tables
params <- list(api_key = "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8")
# Send the API request and get the response
response <- GET(url, query = params)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
# Set the API parameters for requesting available tables
params <- list(api_key = "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8",  includeDataTypes = "Survey (FNDDS)")
# Send the API request and get the response
response <- GET(url, query = params)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
View(data)
# Nastavitev zahteve API-ja
api_key <- "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8"
fdc_ids <- "1105904"
url <- paste0("https://api.nal.usda.gov/fdc/v1/foods?fdcIds=", fdc_ids, "&api_key=", api_key)
# Pošiljanje zahteve API-ju in pridobivanje odgovora
response <- httr::GET(url)
content(response)
url <- "https://api.nal.usda.gov/fdc/v1/foods/list"
params <- list(api_key = "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8", format = "abridged")
# Send the API request and get the response
response <- GET(url, query = params)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
View(data)
url <- "https://api.nal.usda.gov/fdc/v1/foods/search"
params <- list(api_key = api_key, generalSearchInput = "banana")
# Send the API request and get the response
response <- GET(url, query = params)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
json_data <- content(response, as = "text")
parsed_data <- jsonlite::fromJSON(json_data)
str(parsed_data)
View(parsed_data)
# Nastavitev zahteve API-ja
api_key <- "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8"
fdc_ids <- "1105904"
url <- paste0("https://api.nal.usda.gov/fdc/v1/foods?fdcIds=", fdc_ids, "&api_key=", api_key)
# Pošiljanje zahteve API-ju in pridobivanje odgovora
response <- httr::GET(url)
content(response)
View(response)
api_key <- "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8"
# Set the API URL and parameters
fdcId <- "1105911" # Vstavite poljuben fdcId
url <- paste0("https://api.nal.usda.gov/fdc/v1/food/", fdcId)
params <- list(api_key = api_key)
# Send the API request and get the response
response <- GET(url, query = params)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
# Send the API request and get the response
response <- httr::GET(url)
# Convert the response to a data frame
data <- content(response, as = "text") %>%
fromJSON(flatten = TRUE) %>%
as.data.frame()
content(response)
api_key <- "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8"
# Set the API URL and parameters
fdcId <- "1105911" # Vstavite poljuben fdcId
url <- paste0("https://api.nal.usda.gov/fdc/v1/food/", fdcId)
params <- list(api_key = api_key)
# Send the API request and get the response
response <- httr::GET(url)
content(response)
url <- paste0("https://api.nal.usda.gov/fdc/v1/food/", fdcId)
params <- list(api_key = "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8")
# Set the API URL and parameters
fdcId <- "1105911" # Vstavite poljuben fdcId
url <- paste0("https://api.nal.usda.gov/fdc/v1/foods/", fdc_ids, "&api_key=", api_key)
# Pošiljanje zahteve API-ju in pridobivanje odgovora
response <- httr::GET(url)
content(response)
# Nastavitev zahteve API-ja
api_key <- "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8"
fdc_ids <- "1105911"
url <- paste0("https://api.nal.usda.gov/fdc/v1/foods?fdcIds=", fdc_ids, "&api_key=", api_key)
# Pošiljanje zahteve API-ju in pridobivanje odgovora
response <- httr::GET(url)
content(response)
url <- paste0("https://api.nal.usda.gov/fdc/v1/food/", fdc_ids, "&api_key=", api_key)
# Pošiljanje zahteve API-ju in pridobivanje odgovora
response <- httr::GET(url)
content(response)
# Nastavitev zahteve API-ja
api_key <- "kHbFWekgGusKc2LfzKp4dWpa6508yiI2Qx2IPLs8"
fdc_ids <- "1105911"
url <- paste0("https://api.nal.usda.gov/fdc/v1/foods?fdcIds=", fdc_ids, "&api_key=", api_key)
# Pošiljanje zahteve API-ju in pridobivanje odgovora
response <- httr::GET(url)
content(response)
library(readr)
food <- read_csv("FoodData_Central_csv_2022-10-28/food.csv")
food$publication_date <-NULL
food_update_log_entry <- read_csv("FoodData_Central_csv_2022-10-28/food_update_log_entry.csv")
food_upadate_log_entry$last_updated
food_update_log_entry$last_updated <-NULL
View(food_update_log_entry)
View(food)
rename(food_update_log_entry, "id" = "fdc_id")
rename(food_update_log_entry, "fdc_id" = "id")
lenght(intersect(food$fdc_id, food_update_log_entry$id))
length(intersect(food$fdc_id, food_update_log_entry$id))
intersect(food$fdc_id, food_update_log_entry$id)
food_update_log_entry <- rename(food_update_log_entry, "fdc_id" = "id")
View(food_update_log_entry)
View(food)
food_update_log_entry <- rename(food_update_log_entry, "description1"="description")
merge(x=food,y=food_update_log_entry,by="fcd_id",all=TRUE)
merge(x=food,y=food_update_log_entry,all=TRUE)
tab<-merge(x=food,y=food_update_log_entry,all=TRUE)
View(tab)
View(food_update_log_entry)
View(food)
tab<-merge(x=food,y=food_update_log_entry,by="fdc_id",all=TRUE)
View(tab)
View(food)
View(tab)
library(dplyr)
tab <- tab %>% drop_na(description1)
